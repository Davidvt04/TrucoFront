{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\david\\\\OneDrive\\\\Escritorio\\\\TrucoFront\\\\src\\\\components\\\\showChat.js\",\n  _s = $RefreshSig$();\nimport React, { forwardRef, useState, useEffect, useRef } from \"react\";\nimport tokenService from \"../services/token.service\";\nimport { Client } from \"@stomp/stompjs\";\nimport \"./Chat.css\";\nimport MessageList from \"./MessageList\";\nimport { IoCloseCircle } from \"react-icons/io5\";\nimport { IoArrowBack } from \"react-icons/io5\";\nimport InputContainer from \"./InputContainer\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Chat = /*#__PURE__*/_s(/*#__PURE__*/forwardRef(_c = _s((props, ref) => {\n  var _props$player;\n  _s();\n  const jwt = tokenService.getLocalAccessToken();\n  const user = tokenService.getUser();\n  const [stompClient, setStompClient] = useState(null);\n  const [showConfirmModal, setShowConfirmModal] = useState(false);\n  const [mensajes, setMensajes] = useState([]);\n  const [mensaje, setMensaje] = useState(\"\");\n  function fetchMensajesIniciales() {\n    fetch('api/v1/chat/' + props.idChat, {\n      method: 'GET',\n      headers: {\n        Authorization: `Bearer ${jwt}`\n      }\n    }).then(response => response.json()).then(data => {\n      if (data.length > 0) {\n        setMensajes(data);\n      }\n    }).catch(error => {\n      console.error(error);\n      alert(\"Hubo un problema al cargar los mensajes.\");\n    });\n  }\n  function updateChatLastConnection() {\n    /*\r\n    fetch('api/v1/chat/' + props.idChat + '/updatetime', {\r\n      method: 'PATCH',\r\n      headers: {\r\n        Authorization: `Bearer ${jwt}`,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(\"No se pudo actualizar la conexión.\");\r\n        }else{\r\n          console.log(\"Actualizada última fecha de conexión al chat\");\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n        alert(\"Hubo un problema al actualizar la conexión.\");\r\n      });*/\n  }\n  useEffect(() => {\n    updateChatLastConnection();\n    fetchMensajesIniciales();\n    const timer = setInterval(() => {\n      updateChatLastConnection();\n    }, 60000);\n    return () => clearInterval(timer);\n  }, []);\n\n  // Ref para el contenedor de mensajes\n  const messagesEndRef = useRef(null);\n  const messagesContainerRef = useRef(null);\n\n  // Efecto para desplazar automáticamente al final cuando los mensajes cambien\n  function moveScroll() {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }\n  useEffect(() => {\n    const cliente = new Client({\n      brokerURL: \"ws://trucobeasts-e0dxg3dvccd5dvb5.centralus-01.azurewebsites.net/ws\",\n      connectHeaders: {\n        Authorization: `Bearer ${jwt}`\n      }\n    });\n    cliente.onConnect = () => {\n      console.log(\"Conectado exitosamente a \" + props.idChat);\n      cliente.subscribe(`/topic/chat/${props.idChat}`, mensaje => {\n        console.log(\"Mensaje recibido: \", mensaje.body);\n        updateChatLastConnection();\n        const nuevoMensaje = JSON.parse(mensaje.body);\n        setMensajes(prevMensajes => [...prevMensajes, nuevoMensaje]);\n      });\n    };\n    cliente.onDisconnect = () => {\n      console.log(\"Desconectado del servidor STOMP\");\n    };\n    cliente.onStompError = frame => {\n      console.error(\"Error de STOMP: \", frame.headers[\"message\"]);\n      console.error(\"Detalles: \", frame.body);\n    };\n    cliente.activate();\n    setStompClient(cliente);\n    return () => {\n      if (cliente) {\n        cliente.deactivate();\n      }\n    };\n  }, [jwt, props.idChat]);\n  const evtEnviarMensaje = () => {\n    if (stompClient && stompClient.connected && mensaje.trim() !== \"\") {\n      stompClient.publish({\n        destination: \"/app/mensaje\",\n        body: JSON.stringify({\n          contenido: mensaje,\n          chat: {\n            id: props.idChat\n          },\n          remitente: {\n            id: tokenService.getUser().id,\n            username: tokenService.getUser().username\n          },\n          username: {\n            username: tokenService.getUser().username\n          }\n        }),\n        headers: {\n          Authorization: `Bearer ${jwt}`\n        }\n      });\n      console.log(\"Mensaje enviado\");\n      setMensaje(\"\");\n    } else {\n      console.error(\"STOMP aún no está listo o no está conectado\");\n    }\n  };\n  const handleEnviar = () => {\n    evtEnviarMensaje();\n  };\n  const handleRemoveFriend = friendId => {\n    fetch(`https://trucobeasts-e0dxg3dvccd5dvb5.centralus-01.azurewebsites.net/api/v1/jugador/isFriend/${friendId}`, {\n      method: \"DELETE\",\n      headers: {\n        Authorization: `Bearer ${jwt}`\n      }\n    }).then(response => {\n      if (!response.ok) {\n        throw new Error(\"No se pudo eliminar al amigo.\");\n      }\n      props.setChatVisible(false);\n    }).catch(error => {\n      console.error(error);\n      alert(\"Hubo un problema al eliminar al amigo.\");\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(IoArrowBack, {\n      style: {\n        width: 30,\n        height: 30,\n        cursor: \"pointer\",\n        position: 'absolute',\n        top: 10,\n        left: 10,\n        zIndex: 1000,\n        color: \"rgb(123, 27, 0)\"\n      },\n      onClick: () => props.setChatVisible(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"loginText\",\n      style: {\n        fontSize: 30,\n        textAlign: \"center\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        gap: \"10px\",\n        marginTop: \"10px\",\n        position: \"relative\"\n      },\n      children: [((_props$player = props.player) === null || _props$player === void 0 ? void 0 : _props$player.userName) || \"Cargando...\", true && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"dangerButton2\",\n        style: {\n          padding: \"5px 10px\",\n          cursor: \"pointer\",\n          borderRadius: \"1px\",\n          fontSize: \"14px\",\n          position: \"absolute\",\n          right: \"0\",\n          width: \"25%\",\n          height: \"120%\",\n          marginRight: \"30px\"\n        },\n        onClick: () => setShowConfirmModal(true),\n        children: \"Eliminar Amigo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"space-between\",\n        alignItems: \"stretch\",\n        height: \"85vh\",\n        paddingBottom: \"0px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(MessageList, {\n        mensajes: mensajes,\n        userId: user.id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(InputContainer, {\n        mensaje: mensaje,\n        setMensaje: setMensaje,\n        evtEnviarMensaje: evtEnviarMensaje\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }, this), showConfirmModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cuadro-creacion\",\n      style: {\n        position: \"fixed\",\n        top: \"0\",\n        left: \"0\",\n        width: \"100%\",\n        height: \"100%\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        zIndex: 1000\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cuadro-creacion\",\n        style: {\n          padding: \"20px\",\n          borderRadius: \"8px\",\n          textAlign: \"center\",\n          boxShadow: \"0px 4px 6px rgba(0, 0, 0, 0.1)\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\xBFEst\\xE1s seguro de que quieres eliminar este amigo?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            justifyContent: \"center\",\n            gap: \"10px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"dangerButton2\",\n            onClick: () => {\n              handleRemoveFriend(props.player.id);\n              setShowConfirmModal(false);\n            },\n            style: {\n              padding: \"10px 20px\",\n              borderRadius: \"5px\",\n              cursor: \"pointer\"\n            },\n            children: \"S\\xED\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"heavenButton\",\n            onClick: () => setShowConfirmModal(false),\n            style: {\n              border: \"none\",\n              padding: \"10px 20px\",\n              borderRadius: \"5px\",\n              cursor: \"pointer\"\n            },\n            children: \"No\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}, \"8B498VHq1qrvaSU2Nk60UpJv4wU=\")), \"8B498VHq1qrvaSU2Nk60UpJv4wU=\");\n_c2 = Chat;\nexport default Chat;\nvar _c, _c2;\n$RefreshReg$(_c, \"Chat$forwardRef\");\n$RefreshReg$(_c2, \"Chat\");","map":{"version":3,"names":["React","forwardRef","useState","useEffect","useRef","tokenService","Client","MessageList","IoCloseCircle","IoArrowBack","InputContainer","jsxDEV","_jsxDEV","Fragment","_Fragment","Chat","_s","_c","props","ref","_props$player","jwt","getLocalAccessToken","user","getUser","stompClient","setStompClient","showConfirmModal","setShowConfirmModal","mensajes","setMensajes","mensaje","setMensaje","fetchMensajesIniciales","fetch","idChat","method","headers","Authorization","then","response","json","data","length","catch","error","console","alert","updateChatLastConnection","timer","setInterval","clearInterval","messagesEndRef","messagesContainerRef","moveScroll","_messagesEndRef$curre","current","scrollIntoView","behavior","cliente","brokerURL","connectHeaders","onConnect","log","subscribe","body","nuevoMensaje","JSON","parse","prevMensajes","onDisconnect","onStompError","frame","activate","deactivate","evtEnviarMensaje","connected","trim","publish","destination","stringify","contenido","chat","id","remitente","username","handleEnviar","handleRemoveFriend","friendId","ok","Error","setChatVisible","children","style","width","height","cursor","position","top","left","zIndex","color","onClick","fileName","_jsxFileName","lineNumber","columnNumber","className","fontSize","textAlign","display","justifyContent","alignItems","gap","marginTop","player","userName","padding","borderRadius","right","marginRight","flexDirection","paddingBottom","userId","boxShadow","border","_c2","$RefreshReg$"],"sources":["C:/Users/david/OneDrive/Escritorio/TrucoFront/src/components/showChat.js"],"sourcesContent":["import React, { forwardRef, useState, useEffect, useRef } from \"react\";\r\nimport tokenService from \"../services/token.service\";\r\nimport { Client } from \"@stomp/stompjs\";\r\nimport \"./Chat.css\";\r\nimport MessageList from \"./MessageList\";\r\nimport { IoCloseCircle } from \"react-icons/io5\";\r\nimport { IoArrowBack } from \"react-icons/io5\";\r\nimport InputContainer from \"./InputContainer\";\r\nconst Chat = forwardRef((props, ref) => {\r\n  const jwt = tokenService.getLocalAccessToken();\r\n  const user = tokenService.getUser();\r\n  const [stompClient, setStompClient] = useState(null);\r\n\r\n  const [showConfirmModal, setShowConfirmModal] = useState(false);\r\n  const [mensajes, setMensajes] = useState([]);\r\n  const [mensaje, setMensaje] = useState(\"\");\r\n\r\n  function fetchMensajesIniciales() {\r\n    fetch('api/v1/chat/' + props.idChat, {\r\n      method: 'GET',\r\n      headers: {\r\n        Authorization: `Bearer ${jwt}`,\r\n      },\r\n    })\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        if (data.length > 0) {\r\n            setMensajes(data);\r\n           \r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n        alert(\"Hubo un problema al cargar los mensajes.\");\r\n      });\r\n  }\r\n\r\n  function updateChatLastConnection(){\r\n    /*\r\n    fetch('api/v1/chat/' + props.idChat + '/updatetime', {\r\n      method: 'PATCH',\r\n      headers: {\r\n        Authorization: `Bearer ${jwt}`,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(\"No se pudo actualizar la conexión.\");\r\n        }else{\r\n          console.log(\"Actualizada última fecha de conexión al chat\");\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n        alert(\"Hubo un problema al actualizar la conexión.\");\r\n      });*/\r\n  }\r\n\r\n  useEffect(() => {\r\n    updateChatLastConnection();\r\n    fetchMensajesIniciales();\r\n    const timer = setInterval(() => {\r\n      updateChatLastConnection();\r\n    }, 60000);\r\n    return () => clearInterval(timer);\r\n    \r\n  }, []);\r\n\r\n\r\n  // Ref para el contenedor de mensajes\r\n  const messagesEndRef = useRef(null);\r\n  const messagesContainerRef = useRef(null);\r\n\r\n  // Efecto para desplazar automáticamente al final cuando los mensajes cambien\r\n  function moveScroll() {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  }\r\n\r\n\r\n  useEffect(() => {\r\n    const cliente = new Client({\r\n      brokerURL: \"ws://trucobeasts-e0dxg3dvccd5dvb5.centralus-01.azurewebsites.net/ws\",\r\n      connectHeaders: {\r\n        Authorization: `Bearer ${jwt}`,\r\n      },\r\n    });\r\n\r\n    cliente.onConnect = () => {\r\n      console.log(\"Conectado exitosamente a \" + props.idChat);\r\n      cliente.subscribe(`/topic/chat/${props.idChat}`, (mensaje) => {\r\n        console.log(\"Mensaje recibido: \", mensaje.body);\r\n        updateChatLastConnection();\r\n        const nuevoMensaje = JSON.parse(mensaje.body);\r\n        setMensajes((prevMensajes) => [...prevMensajes, nuevoMensaje]);\r\n      });\r\n    };\r\n\r\n    cliente.onDisconnect = () => {\r\n      console.log(\"Desconectado del servidor STOMP\");\r\n    };\r\n\r\n    cliente.onStompError = (frame) => {\r\n      console.error(\"Error de STOMP: \", frame.headers[\"message\"]);\r\n      console.error(\"Detalles: \", frame.body);\r\n    };\r\n\r\n    cliente.activate();\r\n    setStompClient(cliente);\r\n\r\n    return () => {\r\n      if (cliente) {\r\n        cliente.deactivate();\r\n      }\r\n    };\r\n  }, [jwt, props.idChat]);\r\n\r\n  const evtEnviarMensaje = () => {\r\n    if (stompClient && stompClient.connected && mensaje.trim() !== \"\") {\r\n      stompClient.publish({\r\n        destination: \"/app/mensaje\",\r\n        body: JSON.stringify({\r\n          contenido: mensaje,\r\n          chat: { id: props.idChat },\r\n          remitente: { id: tokenService.getUser().id, username: tokenService.getUser().username },\r\n          username: { username: tokenService.getUser().username },\r\n        }),\r\n        headers: {\r\n          Authorization: `Bearer ${jwt}`,\r\n        },\r\n      });\r\n      console.log(\"Mensaje enviado\");\r\n\r\n      setMensaje(\"\");\r\n\r\n    } else {\r\n      console.error(\"STOMP aún no está listo o no está conectado\");\r\n    }\r\n  };\r\n\r\n\r\n  const handleEnviar = () => {\r\n    evtEnviarMensaje();\r\n  };\r\n\r\n  const handleRemoveFriend = (friendId) => {\r\n    fetch(`https://trucobeasts-e0dxg3dvccd5dvb5.centralus-01.azurewebsites.net/api/v1/jugador/isFriend/${friendId}`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        Authorization: `Bearer ${jwt}`,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(\"No se pudo eliminar al amigo.\");\r\n        }\r\n        props.setChatVisible(false);\r\n\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n        alert(\"Hubo un problema al eliminar al amigo.\");\r\n\r\n      });\r\n  };\r\n\r\n\r\n  return (\r\n    <>\r\n    <IoArrowBack style={{ width: 30, height: 30, cursor: \"pointer\", position: 'absolute',top:10,left:10, zIndex:1000, color: \"rgb(123, 27, 0)\"}} onClick={() => props.setChatVisible(false)} />\r\n    <h1 className=\"loginText\" style={{ fontSize: 30, textAlign: \"center\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\", gap: \"10px\",marginTop: \"10px\",position: \"relative\" }}>\r\n        {props.player?.userName || \"Cargando...\"}\r\n        {true && (\r\n          <button\r\n          className=\"dangerButton2\"\r\n            style={{\r\n              padding: \"5px 10px\",\r\n              cursor: \"pointer\",\r\n              borderRadius:\"1px\",\r\n              fontSize: \"14px\",\r\n              position: \"absolute\",\r\n              right: \"0\", \r\n              width:\"25%\",\r\n              height:\"120%\",\r\n              marginRight: \"30px\",\r\n            }}\r\n            onClick={() => setShowConfirmModal(true)}\r\n          >\r\n            Eliminar Amigo\r\n          </button>\r\n        )}\r\n      </h1>\r\n      <hr></hr>\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          justifyContent: \"space-between\",\r\n          alignItems: \"stretch\",\r\n          height: \"85vh\",\r\n          paddingBottom: \"0px\",\r\n        }}\r\n      >\r\n     \r\n        <MessageList mensajes={mensajes} userId={user.id} />\r\n        <InputContainer mensaje={mensaje} setMensaje={setMensaje} evtEnviarMensaje={evtEnviarMensaje} />\r\n      </div>\r\n      {showConfirmModal && (\r\n        <div\r\n        className=\"cuadro-creacion\"\r\n          style={{\r\n            position: \"fixed\",\r\n            top: \"0\",\r\n            left: \"0\",\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            zIndex: 1000,\r\n          }}\r\n        >\r\n          <div\r\n            className=\"cuadro-creacion\"\r\n            style={{\r\n              padding: \"20px\",\r\n              borderRadius: \"8px\",\r\n              textAlign: \"center\",\r\n              boxShadow: \"0px 4px 6px rgba(0, 0, 0, 0.1)\",\r\n            }}\r\n          >\r\n            <p>¿Estás seguro de que quieres eliminar este amigo?</p>\r\n            <div style={{ display: \"flex\", justifyContent: \"center\", gap: \"10px\" }}>\r\n              <button className=\"dangerButton2\" \r\n                onClick={() => {\r\n                  handleRemoveFriend(props.player.id);\r\n                  setShowConfirmModal(false);\r\n                }}\r\n                style={{\r\n                  padding: \"10px 20px\",\r\n                  borderRadius: \"5px\",\r\n                  cursor: \"pointer\",\r\n                }}\r\n              >\r\n                Sí\r\n              </button>\r\n              <button className=\"heavenButton\"\r\n                onClick={() => setShowConfirmModal(false)}\r\n                style={{\r\n                  border: \"none\",\r\n                  padding: \"10px 20px\",\r\n                  borderRadius: \"5px\",\r\n                  cursor: \"pointer\",\r\n                }}\r\n              >\r\n                No\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n});\r\n\r\nexport default Chat;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}