{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\david\\\\OneDrive\\\\Escritorio\\\\TrucoFront\\\\src\\\\manos\\\\Perfil.js\",\n  _s = $RefreshSig$();\nimport useFetchState from \"../util/useFetchState\";\nimport React, { useState, forwardRef, useEffect } from 'react';\nimport tokenService from \"../services/token.service\";\nimport \"../static/css/mano/perfil.css\";\nimport { Client } from \"@stomp/stompjs\";\nimport { MdEmojiEmotions } from \"react-icons/md\";\nimport GestosMenu from \"./GestosMenu\";\nimport ReactDOM from \"react-dom\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst jwt = tokenService.getLocalAccessToken();\n\n// Renders a single player's profile picture and name.\nconst renderJugador = (persona, index) => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: 'relative',\n      width: 80,\n      height: 80,\n      display: 'inline-block',\n      textAlign: 'center'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"swirl-glow-textFoto\",\n      children: persona.userName\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      style: {\n        height: 80,\n        width: 80,\n        borderRadius: 500,\n        objectFit: 'cover',\n        margin: 40,\n        left: '0%',\n        position: 'absolute'\n      },\n      src: persona.foto,\n      alt: `Foto perfil jugador ${index}`,\n      onError: e => e.target.style.display = 'none'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 7\n    }, this)]\n  }, index, true, {\n    fileName: _jsxFileName,\n    lineNumber: 15,\n    columnNumber: 5\n  }, this);\n};\n\n// Fixed distribution as fallback.\nconst DistribuirJugadoresFijos = ({\n  perfil,\n  game\n}) => {\n  return perfil.map((persona, index) => {\n    let playerStyle = {};\n    if (game.numJugadores === 2) {\n      if (index === 0) {\n        playerStyle = {\n          position: 'absolute',\n          top: '50%',\n          right: '10%',\n          transform: 'translateY(-50%)',\n          zIndex: 1000\n        };\n      } else {\n        playerStyle = {\n          position: 'absolute',\n          top: '50%',\n          left: '10%',\n          transform: 'translateY(-50%)',\n          zIndex: 1000\n        };\n      }\n    } else if (game.numJugadores === 4) {\n      if (index === 2) {\n        playerStyle = {\n          position: 'absolute',\n          top: '7%',\n          left: '58%',\n          transform: 'translateX(-50%)',\n          zIndex: 1000\n        };\n      } else if (index === 3) {\n        playerStyle = {\n          position: 'absolute',\n          top: '57%',\n          left: '10%',\n          transform: 'translateY(-50%)',\n          zIndex: 1000\n        };\n      } else if (index === 0) {\n        playerStyle = {\n          position: 'absolute',\n          bottom: '7%',\n          left: '58%',\n          transform: 'translateY(-50%)',\n          zIndex: 1000\n        };\n      } else if (index === 1) {\n        playerStyle = {\n          position: 'absolute',\n          top: '50%',\n          right: '10%',\n          transform: 'translateX(-50%)',\n          zIndex: 1000\n        };\n      }\n    } else if (game.numJugadores === 6) {\n      // Use the original fixed positions for 6 players.\n      let posicion = persona.posicion;\n      if (posicion === 0) {\n        playerStyle = {\n          position: 'absolute',\n          bottom: '7%',\n          left: '49%',\n          transform: 'translateX(-50%)',\n          zIndex: 1000\n        };\n      } else if (posicion === 1) {\n        playerStyle = {\n          position: 'absolute',\n          bottom: '25%',\n          left: '83%',\n          transform: 'translateX(-50%)',\n          zIndex: 1000\n        };\n      } else if (posicion === 2) {\n        playerStyle = {\n          position: 'absolute',\n          top: '25%',\n          left: '85%',\n          transform: 'translateX(-50%)',\n          zIndex: 1000\n        };\n      } else if (posicion === 3) {\n        playerStyle = {\n          position: 'absolute',\n          top: '7%',\n          left: '62%',\n          transform: 'translateY(-50%)',\n          zIndex: 1000\n        };\n      } else if (posicion === 4) {\n        playerStyle = {\n          position: 'absolute',\n          top: '25%',\n          left: '5%',\n          transform: 'translateY(-50%)',\n          zIndex: 1000\n        };\n      } else if (posicion === 5) {\n        playerStyle = {\n          position: 'absolute',\n          bottom: '25%',\n          left: '10%',\n          transform: 'translateX(-50%)',\n          zIndex: 1000\n        };\n      }\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: playerStyle,\n      children: renderJugador(persona, index)\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }, this);\n  });\n};\n\n// Dynamic distribution uses your own position to “rotate” the profiles.\n_c = DistribuirJugadoresFijos;\nconst DistribuirJugadoresDinamicos = ({\n  perfil,\n  game,\n  posicionJugador\n}) => {\n  let posicionUsada = false;\n  let posicionUsadaInferior = false;\n  return perfil.map((persona, index) => {\n    let posicionJug = persona.posicion;\n    // Skip yourself\n    if (posicionJug === posicionJugador) return null;\n    let playerStyle = {};\n    if (game.numJugadores === 2) {\n      // For 2-player matches, the opponent goes to the right if you’re player 0, left if you’re player 1.\n      if (posicionJugador === 0) {\n        playerStyle = {\n          position: 'absolute',\n          top: '50%',\n          right: '10%',\n          transform: 'translateY(-50%)',\n          zIndex: 1000\n        };\n      } else if (posicionJugador === 1) {\n        playerStyle = {\n          position: 'absolute',\n          top: '50%',\n          left: '10%',\n          transform: 'translateY(-50%)',\n          zIndex: 1000\n        };\n      }\n    } else if (game.numJugadores === 4) {\n      // For 4-player matches:\n      // - A teammate (same parity as you) is placed at the top center.\n      // - The other two players go left and right.\n      if (index % 2 === posicionJugador % 2) {\n        playerStyle = {\n          position: 'absolute',\n          top: '7%',\n          left: '60%',\n          transform: 'translateX(-50%)',\n          zIndex: 1000\n        };\n      } else if (!posicionUsada) {\n        posicionUsada = true;\n        playerStyle = {\n          position: 'absolute',\n          top: '45%',\n          left: '5%',\n          transform: 'translateY(-50%)',\n          zIndex: 1000\n        };\n      } else {\n        playerStyle = {\n          position: 'absolute',\n          top: '42%',\n          right: '10%',\n          transform: 'translateY(-50%)',\n          zIndex: 1000\n        };\n      }\n    } else if (game.numJugadores === 6) {\n      // For 6-player matches, here is one possible approach:\n      // (Note: Adjust these values as needed for your design.)\n      if (posicionJug % 2 === posicionJugador % 2) {\n        // Teammates: place them near the top.\n        if (posicionJug === obtenerPosicionEquipo(posicionJugador, 2, 6)) {\n          playerStyle = {\n            position: 'absolute',\n            top: '20%',\n            left: '80%',\n            zIndex: 1000\n          };\n        } else if (posicionJug === obtenerPosicionEquipo(posicionJugador, 4, 6)) {\n          playerStyle = {\n            position: 'absolute',\n            top: '20%',\n            left: '7%',\n            zIndex: 1000\n          };\n        }\n      } else {\n        // Opponents: assign positions along the lower/sides.\n        if (!posicionUsadaInferior) {\n          posicionUsadaInferior = true;\n          playerStyle = {\n            position: 'absolute',\n            bottom: '16%',\n            left: '87%',\n            transform: 'translateX(-50%)',\n            zIndex: 1000\n          };\n        } else if (!posicionUsada) {\n          posicionUsada = true;\n          playerStyle = {\n            position: 'absolute',\n            top: '10%',\n            right: '40%',\n            transform: 'translateY(-50%)',\n            zIndex: 1000\n          };\n        } else {\n          playerStyle = {\n            position: 'absolute',\n            top: '84%',\n            left: '10%',\n            transform: 'translateY(-50%)',\n            zIndex: 1000\n          };\n        }\n      }\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: playerStyle,\n      children: renderJugador(persona, index)\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 7\n    }, this);\n  });\n};\n_c2 = DistribuirJugadoresDinamicos;\nfunction obtenerPosicionEquipo(posicion, incremento, longitud) {\n  return (posicion + incremento) % longitud;\n}\n\n// Main Perfil component.\n// This version uses ReactDOM.createPortal to render the overlay in document.body\n// so that its stacking context is independent of PlayingModal.\nconst Perfil = /*#__PURE__*/_s(/*#__PURE__*/forwardRef(_c3 = _s((props, ref) => {\n  _s();\n  const game = props.game;\n  const posicionJugador = Number(props.posicion); // Ensure numeric\n  const [message, setMessage] = useState(null);\n  const [visible, setVisible] = useState(false);\n  const [perfil, setPerfil] = useFetchState([], `/api/v1/partidajugador/jugadores/codigoPartida/${game.codigo}`, jwt, setMessage, setVisible);\n\n  // --- Gestos code ---\n  const [gestosVisible, setGestosVisible] = useState(false);\n  const [stompClient, setStompClient] = useState(null);\n  const [imagenOriginal, setImagenOriginal] = useState(null);\n  const toggleGestos = () => setGestosVisible(!gestosVisible);\n  useEffect(() => {\n    const cliente = new Client({\n      brokerURL: \"ws://trucobeasts-e0dxg3dvccd5dvb5.centralus-01.azurewebsites.net/resources/images/logoChico.png/ws\",\n      connectHeaders: {\n        Authorization: `Bearer ${jwt}`\n      }\n    });\n    cliente.onConnect = () => {\n      console.log(\"Conectado exitosamente\");\n      cliente.subscribe(`/topic/partida/${props.game.id}`, partJugador => {\n        const partJugadorParse = JSON.parse(partJugador.body);\n        setPerfil(perfil.map(p => p.userName === partJugadorParse.userName ? partJugadorParse : p));\n      });\n    };\n    cliente.onDisconnect = () => {\n      console.log(\"Desconectado del servidor STOMP\");\n    };\n    cliente.onStompError = frame => {\n      console.error(\"Error de STOMP:\", frame.headers[\"message\"]);\n      console.error(\"Detalles:\", frame.body);\n    };\n    cliente.activate();\n    setStompClient(cliente);\n    return () => {\n      if (cliente) cliente.deactivate();\n    };\n  }, [perfil, props.game.id, setPerfil]);\n  const enviarGesto = gestoUrl => {\n    if (!imagenOriginal && perfil[posicionJugador]) {\n      setImagenOriginal(perfil[posicionJugador].foto);\n    }\n    const partJugador = perfil[posicionJugador];\n    partJugador.foto = gestoUrl;\n    if (stompClient && stompClient.connected && partJugador) {\n      stompClient.publish({\n        destination: \"/app/partjugador\",\n        body: JSON.stringify(partJugador),\n        headers: {\n          Authorization: `Bearer ${jwt}`\n        }\n      });\n    } else {\n      console.error(\"STOMP aún no está listo o no está conectado\");\n    }\n  };\n  const gestosDisp = [{\n    nombre: \"1 Espada\",\n    photo: \"/gestos/unoespada.png\",\n    codigo: \"UNOESPADA\"\n  }, {\n    nombre: \"1 Basto\",\n    photo: \"/gestos/unobasto.png\",\n    codigo: \"UNOBASTO\"\n  }, {\n    nombre: \"7 Espada\",\n    photo: \"/gestos/sieteespada.png\",\n    codigo: \"SIETEESPADA\"\n  }, {\n    nombre: \"7 Oro\",\n    photo: \"/gestos/sieteoro.png\",\n    codigo: \"SIETEORO\"\n  }, {\n    nombre: \"Los 3\",\n    photo: \"/gestos/tres.png\",\n    codigo: \"TRES\"\n  }, {\n    nombre: \"Los 2\",\n    photo: \"/gestos/dos.png\",\n    codigo: \"DOS\"\n  }, {\n    nombre: \"1 Copa o 1 Oro\",\n    photo: \"/gestos/unocopaoro.png\",\n    codigo: \"UNOCOPAORO\"\n  }, {\n    nombre: \"Son malas\",\n    photo: \"/gestos/malas.png\",\n    codigo: \"MALAS\"\n  }, {\n    nombre: \"Corazón\",\n    photo: \"/gestos/corazon.png\",\n    codigo: \"CORAZON\"\n  }, {\n    nombre: \"Calavera\",\n    photo: \"/gestos/calavera.gif\",\n    codigo: \"CALAVERA\"\n  }, {\n    nombre: \"Tiempo\",\n    photo: \"/gestos/tiempo.png\",\n    codigo: \"TIEMPO\"\n  }, {\n    nombre: \"Estrella\",\n    photo: \"/gestos/estrella.png\",\n    codigo: \"ESTRELLA\"\n  }];\n\n  // Build overlay content with two layers:\n  // Layer 1: Profiles (non-interactive)\n  // Layer 2: Gestos (interactive)\n  const overlayContent = /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"perfil-profiles-layer\",\n      style: {\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        width: '100vw',\n        height: '100vh',\n        pointerEvents: 'none',\n        zIndex: 1500\n      },\n      children: Number.isNaN(posicionJugador) ? /*#__PURE__*/_jsxDEV(DistribuirJugadoresFijos, {\n        perfil: perfil,\n        game: game\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 14\n      }, this) : /*#__PURE__*/_jsxDEV(DistribuirJugadoresDinamicos, {\n        perfil: perfil,\n        game: game,\n        posicionJugador: posicionJugador\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 14\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"perfil-gestos-layer\",\n      style: {\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        width: '100vw',\n        height: '100vh',\n        pointerEvents: 'none',\n        zIndex: 1600\n      },\n      children: [/*#__PURE__*/_jsxDEV(MdEmojiEmotions, {\n        style: {\n          fontSize: '50px',\n          color: 'yellow',\n          position: 'fixed',\n          bottom: '5px',\n          left: '5px',\n          cursor: 'pointer',\n          pointerEvents: 'auto'\n        },\n        onClick: toggleGestos\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 9\n      }, this), perfil[posicionJugador] && gestosVisible && /*#__PURE__*/_jsxDEV(\"img\", {\n        src: perfil[posicionJugador].foto,\n        alt: \"Foto del usuario\",\n        style: {\n          width: '50px',\n          height: '50px',\n          borderRadius: '50%',\n          marginLeft: '10px',\n          position: 'fixed',\n          bottom: '5px',\n          left: '60px',\n          zIndex: 1600,\n          pointerEvents: 'auto'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 11\n      }, this), gestosVisible && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'fixed',\n          bottom: '60px',\n          left: '5px',\n          zIndex: 1600,\n          pointerEvents: 'auto'\n        },\n        children: /*#__PURE__*/_jsxDEV(GestosMenu, {\n          partJugador: perfil[posicionJugador],\n          enviarGesto: enviarGesto,\n          gestosDisp: gestosDisp,\n          imagenOriginal: imagenOriginal\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 453,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 402,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n  return /*#__PURE__*/ReactDOM.createPortal(overlayContent, document.body);\n}, \"ymltbi8lNHEUOaPq0b+d+Zc8ZnY=\", false, function () {\n  return [useFetchState];\n})), \"ymltbi8lNHEUOaPq0b+d+Zc8ZnY=\", false, function () {\n  return [useFetchState];\n});\n_c4 = Perfil;\nexport default Perfil;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"DistribuirJugadoresFijos\");\n$RefreshReg$(_c2, \"DistribuirJugadoresDinamicos\");\n$RefreshReg$(_c3, \"Perfil$forwardRef\");\n$RefreshReg$(_c4, \"Perfil\");","map":{"version":3,"names":["useFetchState","React","useState","forwardRef","useEffect","tokenService","Client","MdEmojiEmotions","GestosMenu","ReactDOM","jsxDEV","_jsxDEV","Fragment","_Fragment","jwt","getLocalAccessToken","renderJugador","persona","index","style","position","width","height","display","textAlign","children","className","userName","fileName","_jsxFileName","lineNumber","columnNumber","borderRadius","objectFit","margin","left","src","foto","alt","onError","e","target","DistribuirJugadoresFijos","perfil","game","map","playerStyle","numJugadores","top","right","transform","zIndex","bottom","posicion","_c","DistribuirJugadoresDinamicos","posicionJugador","posicionUsada","posicionUsadaInferior","posicionJug","obtenerPosicionEquipo","_c2","incremento","longitud","Perfil","_s","_c3","props","ref","Number","message","setMessage","visible","setVisible","setPerfil","codigo","gestosVisible","setGestosVisible","stompClient","setStompClient","imagenOriginal","setImagenOriginal","toggleGestos","cliente","brokerURL","connectHeaders","Authorization","onConnect","console","log","subscribe","id","partJugador","partJugadorParse","JSON","parse","body","p","onDisconnect","onStompError","frame","error","headers","activate","deactivate","enviarGesto","gestoUrl","connected","publish","destination","stringify","gestosDisp","nombre","photo","overlayContent","pointerEvents","isNaN","fontSize","color","cursor","onClick","marginLeft","createPortal","document","_c4","$RefreshReg$"],"sources":["C:/Users/david/OneDrive/Escritorio/TrucoFront/src/manos/Perfil.js"],"sourcesContent":["import useFetchState from \"../util/useFetchState\";\r\nimport React, { useState, forwardRef, useEffect } from 'react';\r\nimport tokenService from \"../services/token.service\";\r\nimport \"../static/css/mano/perfil.css\";\r\nimport { Client } from \"@stomp/stompjs\";\r\nimport { MdEmojiEmotions } from \"react-icons/md\";\r\nimport GestosMenu from \"./GestosMenu\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nconst jwt = tokenService.getLocalAccessToken();\r\n\r\n// Renders a single player's profile picture and name.\r\nconst renderJugador = (persona, index) => {\r\n  return (\r\n    <div\r\n      style={{\r\n        position: 'relative',\r\n        width: 80,\r\n        height: 80,\r\n        display: 'inline-block',\r\n        textAlign: 'center'\r\n      }}\r\n      key={index}\r\n    >\r\n      <p className=\"swirl-glow-textFoto\">{persona.userName}</p>\r\n      <img\r\n        style={{\r\n          height: 80,\r\n          width: 80,\r\n          borderRadius: 500,\r\n          objectFit: 'cover',\r\n          margin: 40,\r\n          left: '0%',\r\n          position: 'absolute'\r\n        }}\r\n        src={persona.foto}\r\n        alt={`Foto perfil jugador ${index}`}\r\n        onError={(e) => (e.target.style.display = 'none')}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\n// Fixed distribution as fallback.\r\nconst DistribuirJugadoresFijos = ({ perfil, game }) => {  \r\n  return perfil.map((persona, index) => {\r\n    let playerStyle = {};\r\n    if (game.numJugadores === 2) {\r\n      if (index === 0) {\r\n        playerStyle = {\r\n          position: 'absolute',\r\n          top: '50%',\r\n          right: '10%',\r\n          transform: 'translateY(-50%)',\r\n          zIndex: 1000\r\n        };\r\n      } else {\r\n        playerStyle = {\r\n          position: 'absolute',\r\n          top: '50%',\r\n          left: '10%',\r\n          transform: 'translateY(-50%)',\r\n          zIndex: 1000\r\n        };\r\n      }\r\n    } else if (game.numJugadores === 4){\r\n      if (index === 2) {\r\n        playerStyle = {\r\n          position: 'absolute',\r\n          top: '7%',\r\n          left: '58%',\r\n          transform: 'translateX(-50%)',\r\n          zIndex: 1000\r\n        };\r\n      } else if (index === 3) {\r\n        playerStyle = {\r\n          position: 'absolute',\r\n          top: '57%',\r\n          left: '10%',\r\n          transform: 'translateY(-50%)',\r\n          zIndex: 1000\r\n        };\r\n      } else if (index === 0) {\r\n        playerStyle = {\r\n          position: 'absolute',\r\n          bottom: '7%',\r\n          left: '58%',\r\n          transform: 'translateY(-50%)',\r\n          zIndex: 1000\r\n        };\r\n      } else if (index === 1) {\r\n        playerStyle = {\r\n          position: 'absolute',\r\n          top: '50%',\r\n          right: '10%',\r\n          transform: 'translateX(-50%)',\r\n          zIndex: 1000\r\n        };\r\n      }\r\n    } else if (game.numJugadores === 6) { \r\n      // Use the original fixed positions for 6 players.\r\n      let posicion = persona.posicion;\r\n      if (posicion === 0) { \r\n        playerStyle = { \r\n          position: 'absolute', \r\n          bottom: '7%',\r\n          left: '49%', \r\n          transform: 'translateX(-50%)', \r\n          zIndex: 1000 \r\n        }; \r\n      } else if (posicion === 1) { \r\n        playerStyle = { \r\n          position: 'absolute', \r\n          bottom: '25%',\r\n          left: '83%',\r\n          transform: 'translateX(-50%)', \r\n          zIndex: 1000 \r\n        }; \r\n      } else if (posicion === 2) { \r\n        playerStyle = { \r\n          position: 'absolute', \r\n          top: '25%',\r\n          left: '85%',\r\n          transform: 'translateX(-50%)', \r\n          zIndex: 1000 \r\n        }; \r\n      } else if (posicion === 3) { \r\n        playerStyle = { \r\n          position: 'absolute', \r\n          top: '7%',\r\n          left: '62%',\r\n          transform: 'translateY(-50%)', \r\n          zIndex: 1000 \r\n        }; \r\n      } else if (posicion === 4) { \r\n        playerStyle = { \r\n          position: 'absolute', \r\n          top: '25%',\r\n          left: '5%',\r\n          transform: 'translateY(-50%)', \r\n          zIndex: 1000 \r\n        }; \r\n      } else if (posicion === 5) { \r\n        playerStyle = { \r\n          position: 'absolute', \r\n          bottom: '25%',\r\n          left: '10%',\r\n          transform: 'translateX(-50%)', \r\n          zIndex: 1000 \r\n        }; \r\n      }\r\n    }\r\n    return (\r\n      <div key={index} style={playerStyle}>\r\n        {renderJugador(persona, index)}\r\n      </div>\r\n    );\r\n  });\r\n};\r\n\r\n// Dynamic distribution uses your own position to “rotate” the profiles.\r\nconst DistribuirJugadoresDinamicos = ({ perfil, game, posicionJugador }) => {\r\n  let posicionUsada = false;\r\n  let posicionUsadaInferior = false;\r\n  return perfil.map((persona, index) => {\r\n    let posicionJug = persona.posicion;\r\n    // Skip yourself\r\n    if (posicionJug === posicionJugador) return null;\r\n    let playerStyle = {};\r\n\r\n    if (game.numJugadores === 2) {\r\n      // For 2-player matches, the opponent goes to the right if you’re player 0, left if you’re player 1.\r\n      if (posicionJugador === 0) {\r\n        playerStyle = {\r\n          position: 'absolute',\r\n          top: '50%',\r\n          right: '10%',\r\n          transform: 'translateY(-50%)',\r\n          zIndex: 1000\r\n        };\r\n      } else if (posicionJugador === 1) {\r\n        playerStyle = {\r\n          position: 'absolute',\r\n          top: '50%',\r\n          left: '10%',\r\n          transform: 'translateY(-50%)',\r\n          zIndex: 1000\r\n        };\r\n      }\r\n    } else if (game.numJugadores === 4) {\r\n      // For 4-player matches:\r\n      // - A teammate (same parity as you) is placed at the top center.\r\n      // - The other two players go left and right.\r\n      if (index % 2 === posicionJugador % 2) {\r\n        playerStyle = {\r\n          position: 'absolute',\r\n          top: '7%',\r\n          left: '60%',\r\n          transform: 'translateX(-50%)',\r\n          zIndex: 1000\r\n        };\r\n      } else if (!posicionUsada) {\r\n        posicionUsada = true;\r\n        playerStyle = {\r\n          position: 'absolute',\r\n          top: '45%',\r\n          left: '5%',\r\n          transform: 'translateY(-50%)',\r\n          zIndex: 1000\r\n        };\r\n      } else {\r\n        playerStyle = {\r\n          position: 'absolute',\r\n          top: '42%',\r\n          right: '10%',\r\n          transform: 'translateY(-50%)',\r\n          zIndex: 1000\r\n        };\r\n      }\r\n    } else if (game.numJugadores === 6) {\r\n      // For 6-player matches, here is one possible approach:\r\n      // (Note: Adjust these values as needed for your design.)\r\n      if (posicionJug % 2 === posicionJugador % 2) {\r\n        // Teammates: place them near the top.\r\n        if (posicionJug === obtenerPosicionEquipo(posicionJugador, 2, 6)) {\r\n          playerStyle = {\r\n            position: 'absolute',\r\n            top: '20%',\r\n            left: '80%',\r\n            zIndex: 1000\r\n          };\r\n        } else if (posicionJug === obtenerPosicionEquipo(posicionJugador, 4, 6)) {\r\n          playerStyle = {\r\n            position: 'absolute',\r\n            top: '20%',\r\n            left: '7%',\r\n            zIndex: 1000\r\n          };\r\n        }\r\n      } else {\r\n        // Opponents: assign positions along the lower/sides.\r\n        if (!posicionUsadaInferior) {\r\n          posicionUsadaInferior = true;\r\n          playerStyle = {\r\n            position: 'absolute',\r\n            bottom: '16%',\r\n            left: '87%',\r\n            transform: 'translateX(-50%)',\r\n            zIndex: 1000\r\n          };\r\n        } else if (!posicionUsada) {\r\n          posicionUsada = true;\r\n          playerStyle = {\r\n            position: 'absolute',\r\n            top: '10%',\r\n            right: '40%',\r\n            transform: 'translateY(-50%)',\r\n            zIndex: 1000\r\n          };\r\n        } else {\r\n          playerStyle = {\r\n            position: 'absolute',\r\n            top: '84%',\r\n            left: '10%',\r\n            transform: 'translateY(-50%)',\r\n            zIndex: 1000\r\n          };\r\n        }\r\n      }\r\n    }\r\n    return (\r\n      <div key={index} style={playerStyle}>\r\n        {renderJugador(persona, index)}\r\n      </div>\r\n    );\r\n  });\r\n};\r\n\r\nfunction obtenerPosicionEquipo(posicion, incremento, longitud) { \r\n  return (posicion + incremento) % longitud; \r\n}\r\n\r\n// Main Perfil component.\r\n// This version uses ReactDOM.createPortal to render the overlay in document.body\r\n// so that its stacking context is independent of PlayingModal.\r\nconst Perfil = forwardRef((props, ref) => {\r\n  const game = props.game;\r\n  const posicionJugador = Number(props.posicion); // Ensure numeric\r\n  const [message, setMessage] = useState(null);\r\n  const [visible, setVisible] = useState(false);\r\n  const [perfil, setPerfil] = useFetchState(\r\n    [],\r\n    `/api/v1/partidajugador/jugadores/codigoPartida/${game.codigo}`,\r\n    jwt,\r\n    setMessage,\r\n    setVisible\r\n  );\r\n\r\n  // --- Gestos code ---\r\n  const [gestosVisible, setGestosVisible] = useState(false);\r\n  const [stompClient, setStompClient] = useState(null);\r\n  const [imagenOriginal, setImagenOriginal] = useState(null);\r\n  const toggleGestos = () => setGestosVisible(!gestosVisible);\r\n\r\n  useEffect(() => {\r\n    const cliente = new Client({\r\n      brokerURL: \"ws://trucobeasts-e0dxg3dvccd5dvb5.centralus-01.azurewebsites.net/resources/images/logoChico.png/ws\",\r\n      connectHeaders: {\r\n        Authorization: `Bearer ${jwt}`\r\n      }\r\n    });\r\n\r\n    cliente.onConnect = () => {\r\n      console.log(\"Conectado exitosamente\");\r\n      cliente.subscribe(`/topic/partida/${props.game.id}`, (partJugador) => {\r\n        const partJugadorParse = JSON.parse(partJugador.body);\r\n        setPerfil(perfil.map(p =>\r\n          p.userName === partJugadorParse.userName ? partJugadorParse : p\r\n        ));\r\n      });\r\n    };\r\n\r\n    cliente.onDisconnect = () => {\r\n      console.log(\"Desconectado del servidor STOMP\");\r\n    };\r\n\r\n    cliente.onStompError = (frame) => {\r\n      console.error(\"Error de STOMP:\", frame.headers[\"message\"]);\r\n      console.error(\"Detalles:\", frame.body);\r\n    };\r\n\r\n    cliente.activate();\r\n    setStompClient(cliente);\r\n\r\n    return () => {\r\n      if (cliente) cliente.deactivate();\r\n    };\r\n  }, [perfil, props.game.id, setPerfil]);\r\n\r\n  const enviarGesto = (gestoUrl) => {\r\n    if (!imagenOriginal && perfil[posicionJugador]) {\r\n      setImagenOriginal(perfil[posicionJugador].foto);\r\n    }\r\n    const partJugador = perfil[posicionJugador];\r\n    partJugador.foto = gestoUrl;\r\n    if (stompClient && stompClient.connected && partJugador) {\r\n      stompClient.publish({\r\n        destination: \"/app/partjugador\",\r\n        body: JSON.stringify(partJugador),\r\n        headers: {\r\n          Authorization: `Bearer ${jwt}`\r\n        }\r\n      });\r\n    } else {\r\n      console.error(\"STOMP aún no está listo o no está conectado\");\r\n    }\r\n  };\r\n\r\n  const gestosDisp = [\r\n    { nombre: \"1 Espada\", photo: \"/gestos/unoespada.png\", codigo: \"UNOESPADA\" },\r\n    { nombre: \"1 Basto\", photo: \"/gestos/unobasto.png\", codigo: \"UNOBASTO\" },\r\n    { nombre: \"7 Espada\", photo: \"/gestos/sieteespada.png\", codigo: \"SIETEESPADA\" },\r\n    { nombre: \"7 Oro\", photo: \"/gestos/sieteoro.png\", codigo: \"SIETEORO\" },\r\n    { nombre: \"Los 3\", photo: \"/gestos/tres.png\", codigo: \"TRES\" },\r\n    { nombre: \"Los 2\", photo: \"/gestos/dos.png\", codigo: \"DOS\" },\r\n    { nombre: \"1 Copa o 1 Oro\", photo: \"/gestos/unocopaoro.png\", codigo: \"UNOCOPAORO\" },\r\n    { nombre: \"Son malas\", photo: \"/gestos/malas.png\", codigo: \"MALAS\" },\r\n    { nombre: \"Corazón\", photo: \"/gestos/corazon.png\", codigo: \"CORAZON\" },\r\n    { nombre: \"Calavera\", photo: \"/gestos/calavera.gif\", codigo: \"CALAVERA\" },\r\n    { nombre: \"Tiempo\", photo: \"/gestos/tiempo.png\", codigo: \"TIEMPO\" },\r\n    { nombre: \"Estrella\", photo: \"/gestos/estrella.png\", codigo: \"ESTRELLA\" }\r\n  ];\r\n\r\n  // Build overlay content with two layers:\r\n  // Layer 1: Profiles (non-interactive)\r\n  // Layer 2: Gestos (interactive)\r\n  const overlayContent = (\r\n    <>\r\n      {/* Layer 1: Player profiles */}\r\n      <div\r\n        className=\"perfil-profiles-layer\"\r\n        style={{\r\n          position: 'fixed',\r\n          top: 0,\r\n          left: 0,\r\n          width: '100vw',\r\n          height: '100vh',\r\n          pointerEvents: 'none',\r\n          zIndex: 1500\r\n        }}\r\n      >\r\n        {Number.isNaN(posicionJugador)\r\n          ? (<DistribuirJugadoresFijos perfil={perfil} game={game} />)\r\n          : (<DistribuirJugadoresDinamicos\r\n                perfil={perfil}\r\n                game={game}\r\n                posicionJugador={posicionJugador}\r\n              />)\r\n        }\r\n      </div>\r\n      {/* Layer 2: Gestos */}\r\n      <div\r\n        className=\"perfil-gestos-layer\"\r\n        style={{\r\n          position: 'fixed',\r\n          top: 0,\r\n          left: 0,\r\n          width: '100vw',\r\n          height: '100vh',\r\n          pointerEvents: 'none',\r\n          zIndex: 1600\r\n        }}\r\n      >\r\n        <MdEmojiEmotions\r\n          style={{\r\n            fontSize: '50px',\r\n            color: 'yellow',\r\n            position: 'fixed',\r\n            bottom: '5px',\r\n            left: '5px',\r\n            cursor: 'pointer',\r\n            pointerEvents: 'auto'\r\n          }}\r\n          onClick={toggleGestos}\r\n        />\r\n        {perfil[posicionJugador] && gestosVisible && (\r\n          <img\r\n            src={perfil[posicionJugador].foto}\r\n            alt=\"Foto del usuario\"\r\n            style={{\r\n              width: '50px',\r\n              height: '50px',\r\n              borderRadius: '50%',\r\n              marginLeft: '10px',\r\n              position: 'fixed',\r\n              bottom: '5px',\r\n              left: '60px',\r\n              zIndex: 1600,\r\n              pointerEvents: 'auto'\r\n            }}\r\n          />\r\n        )}\r\n        {gestosVisible && (\r\n          <div\r\n            style={{\r\n              position: 'fixed',\r\n              bottom: '60px',\r\n              left: '5px',\r\n              zIndex: 1600,\r\n              pointerEvents: 'auto'\r\n            }}\r\n          >\r\n            <GestosMenu\r\n              partJugador={perfil[posicionJugador]}\r\n              enviarGesto={enviarGesto}\r\n              gestosDisp={gestosDisp}\r\n              imagenOriginal={imagenOriginal}\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n\r\n  return ReactDOM.createPortal(overlayContent, document.body);\r\n});\r\n\r\nexport default Perfil;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}